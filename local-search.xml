<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>windows基础</title>
    <link href="/2020/10/04/windows%E5%9F%BA%E7%A1%80/"/>
    <url>/2020/10/04/windows%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<p>用户权限划分</p><p>system（最高）</p><p>Administrator管理员权限</p><p>User普通用户权限</p><p>权限继承</p><p>例如管理员启动ftp，ftp获得管理员权限</p><p>默认用户</p><p>Administrator</p><p>Guest 来宾用户</p><p>net user 查看系统所有用户</p><p>上传cmd执行：url/cmd.exe /c net user (/c作用:close，执行完cmd后自动关闭)</p><p>用户组</p><p>用户组的特性</p><p>\1. 组是一些用户的集合</p><p>2.为一个组添加权限，组内成员自动获得对应权限</p><p>3.用户加入组后，自动获得组的所有权限</p><p>特殊的组</p><p>1.administrators组</p><p>2.guests组</p><p>3.users组</p><p>4.power users组：Windows内置组</p><p>5.remote desktop组：内置组，远程连接权限（administrator默认自带该权限）</p><p>6.print users组：打印机</p><p>net localgroup 查看当前系统所有的组</p><p>SID:安全标识符，创建组或者用户时分配的唯一标识符 查看sid：whoami /user</p><p>常用的命令</p><p>用户命令</p><p>whoami ：查看当前用户权限 (最高system权限显示： nt authoritysystem）</p><p>net user 用户名：查看具体用户的信息</p><p>net user 用户名 密码 /add：添加一个指定的用户（需要管理员权限，注意密码复杂度）</p><p>query user：查看在线用户</p><p>用户组命令</p><p>net loalgroup 组名 /add：添加一个用户组</p><p>Net loalgroup 组名：查看组内成员</p><p>net localgroup 用户组 用户名 /del：删除组内指定用户</p><p>net localgroup 用户组 用户名 /add：将指定用户添加指定组</p><p>进程命令</p><p>tasklist：查看进程</p><p>tasklist /svc：显示进程名字、PID及其服务</p><p>相关进程名字：360：ZhuDongFangYu.exe</p><p>安全狗：SafeDogUpdateCenter.exe</p><p>远程桌面：teamservice.exe</p><p>tasklist /svc &gt; 文件名字：将进程信息输入到对应的文件中</p><p>杀软对比辅助：<a href="http://ximcx.cn/getAV/">http://ximcx.cn/getAV/</a></p><p>taskkill：杀死进程</p><p>taskkill /f /im 进程名：杀死对应进程，/f：强制执行</p><p>网络命令</p><p>Ipconfig /all：查看本地网络详细信息</p><p>netstat -ano：查看本地网络信息</p><p>netstat -ano | findstr “端口号”：查看对应端口是否开启</p><p>通过修改注册表开启3389：REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal” “Server /v fDenyTSConnections /t REG_DWORD /d 000000000 /f</p><p>关闭3389：REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal” “Server /v fDenyTSConnections /t REG_DWORD /d 11111111 /f</p><p>系统命令</p><p>ver：查看系统版本</p><p>Windows 5.1-win 2003/xp 、 Windows 5.2-win xp 、 Windows 6.1-win 7/2008、Windows 6.2-win 8/2012、Windows 10-win 10</p><p>systeminfo：查看Windows详细信息</p><p>Windows认证及密码</p><p>密码存储文件sam：c:/windows/system32/config/SAM</p><p>密码加密类型</p><p>ntlm hash：明文-16h-Unicode-md4-16h</p><p>ntlm v1    ntlm v2<br>lm hash(已被淘汰)</p><p>登录过程</p><p>Winlogin.exe-lsass.exe-认证</p><p>win版本&amp;&amp;密码版本</p><p>Win2000-lm hash、win2003-ntlm hash、win7-ntlm hash v2</p><p>Windows UAC（win7以上）</p><p>认证控制（以管理员权限运行触发）</p><p>Do you want to allow this app to make  changes to your device?  Procexp  Verified publisher. Microsoft Corporation  File Hard drive on this computer  Show more </p><p>触发UAC的操作</p><p>Windows更新、增加/删除用户、更改账户类型、安装/删除程序、安装驱动、设置家长控制。。。</p><p>Windows ASR（win 10 1709 、win 2016以上）</p><p>Automatic System Restore ——自动系统恢复</p><p>通过配置规则，防止电脑被攻击</p><p>常用防止攻击方式</p><p>office钓鱼、usb、驱动下载攻击、apk攻击</p><p>打开方式</p><p>Gpedit.msc组策略编辑器-计算机设置-管理模板-windows组件-windows defender-攻击防护-ASR攻击面减少</p><p>asr规则</p><p>未配置：禁用asr–&gt;0</p><p>阻止：启用asr–&gt;1</p><p>审核：评估影响–&gt;2</p><p>设置asr规则（powershell下）</p><p><a href="https://docs.microsoft.com/zh-cn/windows/security/threat-protection/microsoft-defender-atp/customize-attack-surface-reduction">https://docs.microsoft.com/zh-cn/windows/security/threat-protection/microsoft-defender-atp/customize-attack-surface-reduction</a></p><p>查看规则效果</p><p>事件查看器：eventvwr.msc</p><p>Windows applocker（win 7以上，手动添加）</p><p>应用程序控制策略</p><p>启用applocker</p><p>Services.msc-application identity</p><p>查看applocker</p><p>Secpot.msc-application control policies-applocker</p><p>applocker规则（阻止的文件）</p><p>可执行文件：exe、com</p><p>脚本：psl、bat、vbs</p><p>安装文件：.msi</p><p>dll文件</p><p>applocker规则条件</p><p>发布者(数字签名进行标识)、路径、文件hash</p><p>Windows access token</p><p>用户访问令牌，描述线程安全的一个对象，不同的用户登录会生成一个对应的令牌，用户创建线程的时候会进行权限的拷贝</p><p>组成</p><p>用户sid、用户组sid、用户登录信息的sid、其他信息</p><p>Windows PowerShell（win7以上自带）</p><p>内存执行，具有隐蔽性，易于绕过杀软</p><p>后缀：.ps1</p><p>版本</p><p>Win7-2.0、win8-3.0、win8.1-4.0、win10-5.0</p><p>Get-host：获取版本信息</p><p>策略</p><p>restricted：禁止一切运行</p><p>remotesigned：本地ok，远程不行</p><p>allsigned：拥有签名的可以运行</p><p>unrestricted：允许一切运行</p><p>Get-ExecutionPolicy：查看当前执行策略</p><p>Set-ExcutionPolicy：设置策略</p><p>t ionPo icy  Set—ExecutionPoIic at pipeline position </p><p>绕过策略的命令</p><p>powershell.exe -ep Bypass -File .\powershell脚本 此方法会有一个进程出现</p><p>powershell.exe -ep Bypass -WindowsStyle Hidden -Nologo -Nointeractive -Noprofile .\powershll脚本 此方法可以避免进程的出现</p><p>常用的脚本</p><p>powersplit、nishang、empire、powercat</p><p>Windows域</p><p>域控：DC，域内主机都会经过DC处理</p><p>img</p><p>DNS服务器</p><p>可以依靠dns定位域控</p><p>域内用户组</p><p>Domain admins：域管理组</p><p>Domain users：域内用户组</p><p>Enterprise admins：企业系统管理组（权限比较高）</p><p>Schema admmins：架构管理员组（权限比较高）</p><p>域内常见命令</p><p>Ipconfig /all：</p><p>I P Conf  Host . . . . . . . . . .  Prim ry Suffix  Node  I P RouKg : • : . . .  DNS suffix search . . . . . :  adapter Local Area  Connec  • : : . : Hybrid  ion  tote.Org  2: </p><p>ping test.org-&gt;可以得到该域控主机的ip地址</p><p>Net user administrator /domain：查看用户在域内的详细信息</p><p>Net time /domain：查看主机在域控中的时间和域控的主机名称</p><p>img</p><p>继续ping该名称可得到域控的ip地址</p><p>. .0t•g  in in .org ti92.16s.93.1ø1 32 bytes o  ron 192.168.93.1”: rlL-128  192.168.93.tg: bytes .32 r IL-12g  ply 192 .168.93.19: bytes—32 r IL—128  fron 192.168.93.  ing statistics for  Sent  trip t in </p><p>Net view /domain:域名 ：查看该域内的主机</p><p>Net group /domain：查看域内的用户组</p><p>Net group “domain computer” /domain：查看域内主机</p><p>查找域控</p><p>Nltest DCLIST:域控名 ：列出当前域内所有域控</p><p>‘DCLIST : TEST </p><p>Net group “domain controllers” /domain：列出当前域内域控</p><p>group “donain  request processed for don. in  up n ane  1 *-8GAS61’03mJ </p><p>查看域内用户</p><p>Net user /domain：查看本地域内所有用户</p><p>ser account, for  in2S%i8  processed a controller for  „in7  completed successfully.  ser for  conpleted </p>]]></content>
    
    
    
    <tags>
      
      <tag>内网安全</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>写在前面</title>
    <link href="/2020/10/02/%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/"/>
    <url>/2020/10/02/%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2/</url>
    
    <content type="html"><![CDATA[<p>欢迎来到我的博客,这里会纪录我的一些学习情况,虽然偷懒居多哈哈</p><html>  <h3>欢迎~</h3>  不足的地方请指正！感谢~  </html>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
